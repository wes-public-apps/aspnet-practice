services:
  DevReactWebApp:
    image: aspnet-react-dev-container
    build:
      context: ../..
      dockerfile: ./Containers/Dev/DockerFile
    container_name: devreactwebapp
    ports: 
      - "80:80"
      - "443:443"
    working_dir: /app
    volumes:
      - ../../ReactWebApp:/app
      - /home/pp/Repos/aspnet-practice/Certificates:/https:ro
    command: sh -c "dotnet build && dotnet watch run"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_URLS=https://+:443;http://+:80
      - ASPNETCORE_Kestrel__Certificates__Default__Password=QkpkmwUqymKdZLutWZIj
      - ASPNETCORE_Kestrel__Certificates__Default__Path=/https/aspnet.pfx
      - REACT_APP_AZURE_ACTIVE_DIRECTORY_APP_CLIENT_ID=ff65e701-1d19-4c00-9c2f-456e93f0eed3